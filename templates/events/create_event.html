{% extends 'base.html' %}

{% block title %}Event erstellen - Running Dinner{% endblock %}

{% block content %}
<div class="container py-4">
    <!-- Breadcrumb -->
    <div class="row mb-4">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'events:organizer_dashboard' %}">Dashboard</a></li>
                    <li class="breadcrumb-item active">Event erstellen</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Header -->
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold">Neues Running Dinner Event</h1>
                <p class="lead text-muted">
                    Erstelle ein unvergessliches Running Dinner Event für deine Stadt.
                </p>
            </div>

            <!-- Create Event Form -->
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-primary text-white py-3">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-calendar-plus"></i>
                        Event-Details
                    </h5>
                </div>
                <div class="card-body p-4">
                    <form method="post">
                        {% csrf_token %}
                        
                        <!-- Basic Information -->
                        <div class="row g-4 mb-4">
                            <div class="col-md-8">
                                <label for="name" class="form-label fw-bold">
                                    <i class="bi bi-tag text-primary"></i>
                                    Event-Name *
                                </label>
                                <input type="text" class="form-control form-control-lg" id="name" name="name" 
                                       placeholder="z.B. Running Dinner München Herbst 2024" required>
                            </div>
                            <div class="col-md-4">
                                <label for="city" class="form-label fw-bold">
                                    <i class="bi bi-geo-alt text-success"></i>
                                    Stadt *
                                </label>
                                <input type="text" class="form-control form-control-lg" id="city" name="city" 
                                       placeholder="z.B. München" required>
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="mb-4">
                            <label for="description" class="form-label fw-bold">
                                <i class="bi bi-card-text text-info"></i>
                                Beschreibung *
                            </label>
                            <textarea class="form-control" id="description" name="description" rows="4" 
                                      placeholder="Beschreibe dein Event: Was macht es besonders? Welches Thema hat es? Was können die Teilnehmer erwarten?" required></textarea>
                        </div>

                        <!-- Dates and Times -->
                        <div class="row g-4 mb-4">
                            <div class="col-md-4">
                                <label for="event_date" class="form-label fw-bold">
                                    <i class="bi bi-calendar text-primary"></i>
                                    Event-Datum *
                                </label>
                                <input type="date" class="form-control" id="event_date" name="event_date" required>
                            </div>
                            <div class="col-md-4">
                                <label for="registration_start" class="form-label fw-bold">
                                    <i class="bi bi-play-circle text-success"></i>
                                    Anmeldung startet *
                                </label>
                                <input type="datetime-local" class="form-control" id="registration_start" name="registration_start" required>
                            </div>
                            <div class="col-md-4">
                                <label for="registration_deadline" class="form-label fw-bold">
                                    <i class="bi bi-stop-circle text-danger"></i>
                                    Anmeldeschluss *
                                </label>
                                <input type="datetime-local" class="form-control" id="registration_deadline" name="registration_deadline" required>
                            </div>
                        </div>

                        <!-- Course Times -->
                        <div class="card bg-light mb-4">
                            <div class="card-body">
                                <h6 class="card-title">
                                    <i class="bi bi-clock text-warning"></i>
                                    Kurs-Zeiten
                                </h6>
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label for="appetizer_time" class="form-label">Vorspeise</label>
                                        <input type="time" class="form-control" id="appetizer_time" 
                                               name="appetizer_time" value="18:00">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="main_course_time" class="form-label">Hauptgang</label>
                                        <input type="time" class="form-control" id="main_course_time" 
                                               name="main_course_time" value="20:00">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="dessert_time" class="form-label">Nachspeise</label>
                                        <input type="time" class="form-control" id="dessert_time" 
                                               name="dessert_time" value="22:00">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Event Configuration -->
                        <div class="row g-4 mb-4">
                            <div class="col-md-4">
                                <label for="max_teams" class="form-label fw-bold">
                                    <i class="bi bi-people text-primary"></i>
                                    Max. Teams
                                </label>
                                <input type="number" class="form-control" id="max_teams" name="max_teams" 
                                       value="12" min="3" max="50">
                                <div class="form-text">Mindestens 3 Teams erforderlich</div>
                            </div>
                            <div class="col-md-4">
                                <label for="team_size" class="form-label fw-bold">
                                    <i class="bi bi-person-plus text-info"></i>
                                    Team-Größe
                                </label>
                                <select class="form-select" id="team_size" name="team_size">
                                    <option value="2" selected>2 Personen</option>
                                    <option value="3">3 Personen</option>
                                    <option value="4">4 Personen</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="groups_per_course" class="form-label fw-bold">
                                    <i class="bi bi-grid text-success"></i>
                                    Teams pro Kurs
                                </label>
                                <select class="form-select" id="groups_per_course" name="groups_per_course">
                                    <option value="2">2 Teams</option>
                                    <option value="3" selected>3 Teams</option>
                                    <option value="4">4 Teams</option>
                                </select>
                            </div>
                        </div>

                        <!-- Pricing and Distance -->
                        <div class="row g-4 mb-4">
                            <div class="col-md-6">
                                <label for="price_per_person" class="form-label fw-bold">
                                    <i class="bi bi-currency-euro text-warning"></i>
                                    Preis pro Person (€)
                                </label>
                                <input type="number" class="form-control" id="price_per_person" name="price_per_person" 
                                       value="25.00" step="0.50" min="0">
                                <div class="form-text">Für Zutaten und Organisation</div>
                            </div>
                            <div class="col-md-6">
                                <label for="max_distance_km" class="form-label fw-bold">
                                    <i class="bi bi-geo text-info"></i>
                                    Max. Entfernung (km)
                                </label>
                                <input type="number" class="form-control" id="max_distance_km" name="max_distance_km" 
                                       value="10.00" step="0.5" min="1">
                                <div class="form-text">Maximale Entfernung zwischen Kursen</div>
                            </div>
                        </div>

                        <!-- Visibility -->
                        <div class="mb-4">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="is_public" name="is_public" checked>
                                <label class="form-check-label fw-bold" for="is_public">
                                    <i class="bi bi-globe text-success"></i>
                                    Öffentlich sichtbar
                                </label>
                                <div class="form-text">Soll das Event in der öffentlichen Event-Liste erscheinen?</div>
                            </div>
                        </div>

                        <!-- Submit Buttons -->
                        <div class="d-flex gap-3 justify-content-end">
                            <a href="{% url 'events:organizer_dashboard' %}" class="btn btn-outline-secondary btn-lg">
                                <i class="bi bi-arrow-left"></i> Zurück
                            </a>
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="bi bi-check-circle"></i> Event erstellen
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info Card -->
            <div class="card border-0 shadow-sm mt-4">
                <div class="card-header bg-light border-0 py-3">
                    <h6 class="card-title mb-0">
                        <i class="bi bi-info-circle text-primary"></i>
                        Was passiert als Nächstes?
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3 text-center">
                            <div class="bg-primary bg-opacity-10 rounded-circle p-3 d-inline-block mb-2">
                                <i class="bi bi-1-circle-fill text-primary fs-4"></i>
                            </div>
                            <h6>Event erstellen</h6>
                            <small class="text-muted">Alle Details konfigurieren</small>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="bg-success bg-opacity-10 rounded-circle p-3 d-inline-block mb-2">
                                <i class="bi bi-2-circle-fill text-success fs-4"></i>
                            </div>
                            <h6>Teams sammeln</h6>
                            <small class="text-muted">Anmeldungen verwalten</small>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="bg-warning bg-opacity-10 rounded-circle p-3 d-inline-block mb-2">
                                <i class="bi bi-3-circle-fill text-warning fs-4"></i>
                            </div>
                            <h6>Optimierung</h6>
                            <small class="text-muted">Automatische Zuordnung</small>
                        </div>
                        <div class="col-md-3 text-center">
                            <div class="bg-info bg-opacity-10 rounded-circle p-3 d-inline-block mb-2">
                                <i class="bi bi-4-circle-fill text-info fs-4"></i>
                            </div>
                            <h6>Event läuft</h6>
                            <small class="text-muted">Navigation & Tracking</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Automatische Datums-Vorschläge
document.addEventListener('DOMContentLoaded', function() {
    const eventDate = document.getElementById('event_date');
    const regStart = document.getElementById('registration_start');
    const regDeadline = document.getElementById('registration_deadline');
    
    eventDate.addEventListener('change', function() {
        if (this.value) {
            const eventDateTime = new Date(this.value);
            
            // Anmeldung startet 4 Wochen vorher
            const startDate = new Date(eventDateTime);
            startDate.setDate(startDate.getDate() - 28);
            regStart.value = startDate.toISOString().slice(0, 16);
            
            // Anmeldeschluss 3 Tage vorher
            const deadlineDate = new Date(eventDateTime);
            deadlineDate.setDate(deadlineDate.getDate() - 3);
            regDeadline.value = deadlineDate.toISOString().slice(0, 16);
        }
    });
});
</script>
{% endblock %}
